#!/bin/bash
#
# Note: Best to run this test between two computers instead of over localhost.
#       Modify the IP in the URL in the find command to do this.
#
# After generating test files benchmark with this command:
#  siege -b -c100 -t1m -i -f URL > /dev/null
#   -b No delay between requests.
#   -c # of concurrent requests.
#   -t Time of test.
#   -i Request random URLs (best to avoid caching).
#   -f URL file to load.
#   Note: output directed to /dev/null because it slows down siege.
#
mkdir test_files/
cd test_files/
for i in `seq 1 100`; do
	mkdir files-$i;
	for j in `seq 1 100`; do
		dd if=/dev/zero of=files-$i/$j bs=100k count=1 > /dev/null;
	done;
done;
find . |grep 'files.*/.' |sed 's#./#http://127.0.0.1:8080/#' > ../URL
